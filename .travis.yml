language: node_js

node_js:
  - '4'
  - '6'
  - '7'
  - '8'

branches:
  only:
    - master

matrix:
  include:
    - node_js: '4'
      env: SCRIPT=npm run ci-node
    - node_js: '6'
      # In PR-builds env vars are not available for security, so build in Node instead of sauce
      env: SCRIPT='if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then npm run ci-node-sauce; else npm run ci-node fi'
    - node_js: '7'
      env: SCRIPT=npm run ci-node
    - node_js: '8'
      env: SCRIPT=npm run ci-node
  exclude:
    # Note: Workaround travis-ci/travis-ci#4681
    # Exclude default job which lacks our included environment variables.
    - node_js: '4'
    - node_js: '6'
    - node_js: '7'
    - node_js: '8'

script: $SCRIPT
